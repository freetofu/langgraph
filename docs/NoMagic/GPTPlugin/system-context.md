# CATIA Magic + GPT 연계 System Context(운용 관점) 분석

본 문서는 사용자 시나리오를 기반으로 **운용 관점의 시스템 컨텍스트**를 정의하고, CATIA Magic, 플러그인, 사용자, GPT API 간 상호작용과 데이터 흐름을 정리한다.

## 1. 시스템 경계(System Boundary)
- **시스템 내부**: CATIA Magic(모델링 도구), MagicGPTPlugin(로컬 플러그인)
- **시스템 외부**: 사용자(엔지니어/아키텍트/검증 담당자), GPT API(외부 AI 서비스), 인증/보안 인프라

## 2. 주요 액터(Actors)
- **사용자**: 모델링 작업 수행, GPT 질의 작성 및 결과 반영
- **CATIA Magic**: 모델 생성/편집/검토가 이루어지는 호스트 애플리케이션
- **MagicGPTPlugin**: UI 제공, 데이터 추출/요약, GPT API 요청/응답 처리
- **GPT API**: 자연어 처리 및 제안 생성

## 3. 시스템 컨텍스트 다이어그램(텍스트)
```
[User]
  | (질문 입력, 결과 반영)
  v
[MagicGPTPlugin] <--> [CATIA Magic Model/Data]
  | (요청/응답, 인증)
  v
[GPT API]
```

## 4. 상호작용 방식(운용 흐름)

### 4.1 사용자 ↔ 플러그인
- **입력**: 자연어 질문, 단계/목표 설정, 모델 범위 지정
- **출력**: GPT 응답(요약/상세), 추천 모델 요소, 체크리스트, 영향 분석 결과

### 4.2 플러그인 ↔ CATIA Magic
- **읽기**: 모델 구조, 요구사항 리스트, 요소 속성/관계, 이력/변경 로그
- **쓰기(선택적)**: 모델 요소 생성/수정 제안 반영, 추적 링크 생성

### 4.3 플러그인 ↔ GPT API
- **요청**: 텍스트 프롬프트 + 모델 컨텍스트 요약 + 사용자 의도
- **응답**: 구조화된 제안(요구사항, 모델 요소, 체크리스트 등)

## 5. 교환되어야 하는 정보(핵심 데이터)

### 5.1 사용자 입력 데이터
- 질의 텍스트(자연어)
- 목적/단계(예: 요구사항, 아키텍처, V&V)
- 요청 유형(예: 생성, 점검, 요약, 영향 분석)

### 5.2 모델 컨텍스트 데이터(플러그인 → GPT API)
- 모델 요소 목록(블록, 액터, 인터페이스 등)
- 관계 정보(구성, 의존, 할당, 추적성 링크)
- 요구사항 텍스트 및 ID
- 모델링 규칙/네이밍 규칙(프로젝트별)
- 최근 변경 사항(선택적)

### 5.3 GPT 응답 데이터(GPT API → 플러그인)
- 요구사항 후보 및 정제안
- 모델 요소 제안(이름/역할/관계)
- 추적성 링크 후보
- 체크리스트/검증 항목
- 규격 준수 항목 및 리스크 요약

## 6. 통신/보안 요구사항(운용 관점)
- **인증**: API 키 또는 OAuth 기반 인증
- **데이터 최소화**: 필요한 모델 요약만 전송
- **보안 정책**: 외부 전송 정보에 대한 민감도 분류 및 마스킹
- **감사 로그**: GPT 요청/응답 기록, 사용자 액션 로그

## 7. 운용 시 고려사항
- **응답 지연**: 실시간 사용을 고려한 타임아웃/재시도 정책
- **편집 충돌**: 모델 변경 중 GPT 제안 반영 시 동시성 처리
- **사용자 승인**: GPT 제안은 항상 사용자 승인 후 적용

## 8. 향후 상세화 항목
- API 요청 포맷(예: JSON 구조)
- 모델 컨텍스트 요약 정책(토큰 제한 대응)
- 플러그인 내 제안 적용 워크플로우(미리보기/승인/적용)
