# MagicGPT 개발 전 결정 사항(안)

본 문서는 개발 착수 전에 필요한 항목을 **가능한 범위에서 사전 결정**한 내용이다. 사용자 결정이 반드시 필요한 항목은 별도 표기한다.

## 1. GPT API 및 모델 운영 정책(결정)
- **모델 호출 방식**: 단일 GPT 모델 호출(스트리밍 미사용).
- **요청 형식**: system + user 프롬프트와 context JSON 병합.
- **토큰 예산**: 기본 6,000 토큰, 초과 시 컨텍스트 축약.
- **오류 정책**: 네트워크 오류 2회 재시도, 파싱 오류 1회 재요청.
- **타임아웃**: API 호출 20초.

## 2. 컨텍스트 축약/우선순위 정책(결정)
- **우선순위 순서**: 요구사항 → 관계 → 핵심 요소 → 최근 변경.
- **요약 기준**: 요소 수가 임계치(예: 200개) 초과 시 하위 패키지부터 축약.

## 3. 모델 적용 및 승인 정책(결정)
- **승인 단위**: 일괄 승인만 지원.
- **적용 실패 시**: 전체 변경 세트 롤백.
- **적용 기록**: 변경 전/후 스냅샷 메타데이터 저장.

## 4. 보안/감사 정책(결정)
- **마스킹 대상**: 사용자 식별 정보, 보안 등급 표기 요소, 민감 텍스트.
- **로그 저장 범위**: 요청 메타데이터, 응답 요약, 적용 결과.
- **API 키 저장**: 로컬 파일 저장 금지, 환경 변수/보안 저장소 사용.

## 5. 테스트/검증 정책(결정)
- **단위 테스트**: 컨텍스트 요약, 파싱, 변경 세트 생성.
- **통합 테스트**: API 호출 + 모델 반영 + 롤백.
- **보안 테스트**: 마스킹 적용/누락 점검.

## 6. 사용자 결정이 꼭 필요한 항목
## 6. 확정된 사용자 결정 사항
- **적용 대상 모델 범위 기본값**: 전체 모델
- **규격 준수 범위**: ISO 26262/21434 외 추가 규격 없음
- **로그 보관 기간**: 90일 보관 후 자동 삭제
- **API 사용 규정**: 테스트용 환경으로 제한 없음
